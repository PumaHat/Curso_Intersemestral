<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html>
<html xml:lang="es" xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
        <title>Generalidades del sistema</title>
        <link rel="stylesheet" href="assets/reset.css" />
        <link rel="stylesheet" href="assets/reveal.css" />
        <link rel="stylesheet" href="assets/theme/dracula.css" />
        <link rel="stylesheet" href="assets/highlight/monokai.css" />
        <link rel="stylesheet" href="assets/fonts.css" />
    </head>
    <body>
        <div class="reveal">
        <div class="slides">       
            <!--PRIMER TEMA-->
            <section>
                <section>
                <h2>Tema 1:<br />Generalidades del sistema Unix</h2>
                </section>
                <section>
                <h2>¿Por qué esto es importante?</h2>
                <ul style="font-size: smaller;">
                    <li>Es más fácil trabajar en un sistema que conoces
                    <ul>
                        <li>¿Qué recursos provee el sistema?</li>
                        <li>¿Cómo puedo adaptarlo a mis necesidades?</li>
                        <li>¿Cómo preparo mi entorno de pruebas?</li>
                    </ul>
                    </li>
                    <li>Es más fácil vulnerar un sistema que conoces
                    <ul>
                        <li>¿Qué sistemas está ejecutando? ¿Cuáles son los más vulnerables?</li>
                        <li>¿Hay alguna vulnerabilidad sin corregir? ¿Cómo puedo explotarla?</li>
                    </ul>
                    </li>
                </ul>
                </section>
                <section>
                <h2>Nomenclatura</h2>
                <p>Existe una controversia en cuanto a cómo nombrar a un sistema operativo que utilice el kernel Linux y el software del proyecto de GNU.</p>
                </section>
                <section>
                <h2>Nomenclatura:<br /> GNU/Linux</h2>
                <ul>
                    <li>Linux es realmente el nombre de un kernel.</li>
                    <li>La mayoría de los sistemas operativos para escritorio que utilizan el kernel Linux utilizan software del proyecto GNU para funcionar (<i>glibc</i>, <i>coreutils</i>).</li>
                    <li>Existen sistemas operativos que, sin embargo, no utilizan software del proyecto GNU:
                    <ul><li>Android es el ejemplo más popular.</li></ul>
                    </li>
                </ul>
                </section>
                <section>
                <h2>Nomenclatura: Linux</h2>
                <ul>
                    <li>Algunos creen que esta disputa es solo un intento de "marcar territorio".</li>
                    <li>Además del software de GNU, hay muchas otras utilidades de diferentes fuentes que probablemente merezcan ser mencionadas.</li>
                    <li>La marca ‘Linux’ es mucho más popular que su alternativa.</li>
                </ul>
                </section>
            </section>
            <section>
                <section>
                <h2>Historia</h2>
                <ul style="font-size: smaller">
                    <li>Conocer la historia de un sistema ayuda muchas veces a entender mejor muchas cosas:
                    <ul>
                        <li>Por qué se tomaron ciertas decisiones de diseño.</li>
                        <li>Por qué se utilizaron ciertas tecnologías y no otras.</li>
                        <li>Por qué el <i>state of the art</i> es así.</li>
                    </ul>
                    </li>
                    <li>Una parte importante de la historia de Linux es la historia de Unix:
                    <ul>
                        <li>Porque Linux es parte de la familia Unix.</li>
                        <li>∴ <strong>No se puede entender Linux a profundidad sin entender antes Unix.</strong></li>
                    </ul>
                    </li>
                </ul>
                </section>
                <section id="unix_i">
                <h2>Unix (I)</h2>
                <ul>
                    <li>Unix nació en 1969, en los Laboratorios Bell.</li>
                    <li>Su propósito era tener un SO multitarea, multiusuario, y muchas mejoras sobre SOs anteriores.</li>
                    <li>El lenguaje C se inventó, en parte, para poder hacer que Unix fuera <a href="#/portabilidad">portable</a>: C y Unix son prácticamente hermanos.
                    <ul><li>Unix fue reescrito en C en 1973 para hacer al sistema portable.</li></ul>
                    </li>
                </ul>
                </section>
                <section>
                <h2>Paréntesis: Derecho</h2>
                <ul>
                    <li>El mundo de la informática no está aislado, tiene intersecciones con otras disciplinas.</li>
                    <li>Una que tiene y ha tenido efectos importantes en la historia de la informática es el <em>Derecho</em>.</li>
                </ul>
                </section>
                <section>
                <h2>¿Por qué es importante?</h2>
                <ul>
                    <li>Derechos de autor: licencias, obras derivadas, copyleft, <i>fair use</i></li>
                    <li>Patentes de software</li>
                    <li>Protección de datos personales</li>
                    <li>Leyes económicas: compañías, leyes <i>antitrust</i>.</li>
                    <li>Seguridad nacional: exportación de criptografía</li>
                </ul>
                </section>
                <section>
                <h2>Algunos casos relevantes</h2>
                <ul style="font-size: smaller">
                    <li>Derechos de autor:
                    <ul>
                        <li>Ideas: <i>Apple Computer, Inc. v. Microsoft Corp.</i> (1994)</li>
                        <li>APIs: <i>Google LLC v. Oracle America, Inc.</i> (2021)</li>
                        <li>Distribución: <i>Metallica v. Napster, Inc.</i>, <i>A&M Records, Inc. v. Napster, Inc.</i> (2000)</li>
                    </ul>
                    </li>
                    <li>Monopolios según la ley <i>Sherman Antitrust</i>:
                    <ul>
                        <li><i>Standard Oil Co. of New Jersey v. United States</i> (1911)</li>
                        <li><i>United States v. AT&amp;T Co.</i> (1982)</li>
                        <li><i>United States v. Microsoft Corp.</i> (2001)</li>
                    </ul>
                    <li>GPG: <i>Bernstein v. United States</i> (1995)</li>
                </ul>
                </section>
                <section>
                <h2>Unix (II)</h2>
                <ul style="font-size: smaller;">
                    <li>Los Laboratorios Bell eran parte de AT&amp;T.</li>
                    <li>AT&amp;T tenía una guerra legal con el Gobierno de los Estados Unidos.</li>
                    <li>Las leyes antitrust prohibían a AT&amp;T entrar al mercado de los computadores.
                    <ul>
                        <li>AT&amp;T no podía vender computadores propios, por lo que licenció Unix a otros fabricantes como secreto comercial.
                        </li>
                    </ul>
                    </li>
                    <li>El gobierno estadounidense consiguió finalmente dividir a AT&amp;T en 1983.
                    <ul><li>AT&amp;T pudo entrar al mercado de los computadores, y vender Unix directamente.</li></ul>
                    </li>
                </ul>
                </section>
                <section>
                <h2>GNU</h2>
                <ul style="font-size: smaller">
                    <li>Richard Stallman inició el proyecto GNU en 1983, para crear una versión de un sistema Unix totalmente libre.
                    <ul>
                        <li>Después, creó la Free Software Foundation en 1985…</li>
                        <li>…y la licencia libre GPL en 1989.</li>
                    </ul>
                    </li>
                    <li>Para esa fecha, casi todos los componentes del sistema GNU estaban listos…
                    <ul><li>…excepto la parte del kernel (Hurd).</li></ul>
                    </li>
                    <li>El caso de Hurd se debió a la inesperada dificultad para implementar bien un microkernel.</li>
                </ul>
                </section>
                <section>
                <h2>Minix</h2>
                <ul style="font-size: smaller;">
                    <li>Andrew S. Tanenbaum, profesor de ciencias de la computación, creó en 1986 un sistema operativo de tipo Unix muy simple para propósitos educativos: <i>Minix</i>.
                    </li>
                    <li>Minix funcionaba en plataformas Intel de 16 bits.
                    <ul><li>Pero Intel había ya lanzado al mercado un año antes el 80386, un procesador de 32 bits.
                    </li></ul>
                    </li>
                    <li>Linus Torvalds tuvo contacto con el sistema durante una clase de su universidad, en 1990.</li>
                    <li>La licencia de Minix permitía ver su código, pero no modificarlo.
                    <ul><li>Linus empezó a escribir un kernel para utilizar las funciones de su equipo, un 386.</li></ul>
                    </li>
                </ul>
                </section>
                <section>
                <h2>Inicios de Linux</h2>
                <p>Linus finalmente anunció su proyecto en agosto de 1991, en el grupo de noticias comp.os.minix:</p>
                <ul>
                    <li>Linux inicialmente tenía una licencia privativa.
                    <ul><li>En diciembre de 1992 finalmente cambió a la licencia GPLv2.</li></ul>
                    </li>
                    <li>Este cambio permitió que los desarrolladores del proyecto GNU adoptaran Linux como kernel del proyecto.</li>
                </ul>
                </section>
            </section>
            <section>
                <section>
                <h2>Regresando a Unix…</h2>
                <ul>
                    <li>Como dijimos, Linux es un sistema Unix.
                    <ul>
                        <li>¿Qué significa ser un sistema Unix?</li>
                        <li>¿Existe acaso una definición formal que nos diga si algo es o no un sistema Unix?
                        <ul>
                            <li><strong>POSIX</strong>: estándar de la IEEE.</li>
                            <li><strong>Single Unix Specification</strong>:  certificación mantenida por el consorcio The Open Group.</li>
                        </ul>
                        </li>
                    </ul>
                    </li>
                </ul>
                </section>
                <section>
                <h2>POSIX</h2>
                <ul style="font-size: smaller">
                    <li>Siglas de <em>Portable Operating System Interface</em>.</li>
                    <li>Define varias interfaces para mantener la compatibilidad entre sistemas Unix:
                    <ul>
                        <li>Biblioteca C POSIX</li>
                        <li>Servicios esenciales: tuberías, señales, procesos y operaciones de archivos.</li>
                        <li>Extensiones de tiempo real: relojes, asincronía, semáforos, planificación.</li>
                        <li>Extensiones de hilos</li>
                        <li>Comandos y utilidades: la shell, comandos como awk, echo, ed, etc.</li>
                    </ul>
                    </li>
                </ul>
                </section>
                <section>
                <h2>Marca Unix</h2>
                <ul>
                    <li>Actualmente, la marca <i>Unix</i> es propiedad de The Open Group.</li>
                    <li>Novell solo permite usar la marca a aquellos que cumplan la certificación SUS, y hayan pagado las regalías.
                    </li>
                    <li>Coloquialmente, llamamos <em>sistema Unix</em> a cualquier SO que cumpla todos o la mayoría de los requisitos, estén certificados o no: la <strong>familia Unix-like</strong>.
                    </li>
                </ul>
                </section>
                <section>
                <h2>Unixes más populares</h2>
                <p>Unix es actualmente la familia de SOs más utilizada en el mundo, y se suelen agrupar en dos grupos:</p>
                <ul>
                    <li><strong>Sistemas UNIX certificados:</strong> Hay varios SO comerciales que están certificados.</li>
                    <li><strong>Sistemas no certificados</strong> o <strong>sistemas Unix-like:</strong> Otros no están certificados, pero aún así, son prácticamente sistemas Unix, por cumplir la mayoría o todos los requisitos que establece la SUS.
                    </li>
                </ul>
                </section>
                <section>
                <h2>Certificados</h2>
                <ul>
                    <li><strong>Solaris: </strong>versión de Sun/Oracle.
                    <ul><li>Existe una versión libre: <strong>Illumos</strong></li></ul></li>
                    <li><strong>AIX: </strong>versión de IBM.</li>
                    <li><strong>HP-UX: </strong>versión de Hewlett-Packard.</li>
                    <li><strong>macOS: </strong>versión de Apple</li>
                </ul>
                </section>
                <section>
                <h2>No certificados</h2>
                <ul style="font-size: smaller;">
                    <li><strong>Familia BSD: </strong>basados en la implementación de la Universidad de Berkeley:
                    <ul>
                        <li><strong>FreeBSD: </strong>el integrante más famoso, de propósito general.</li>
                        <li><strong>OpenBSD: </strong>enfocado en la seguridad: ¡solo ha tenido dos agujeros de seguridad en muchos años!
                        </li>
                        <li><strong>NetBSD: </strong>enfocado en ser portable: ¡se puede ejecutar en más de 50 arquitecturas!</li>
                    </ul>
                    </li>
                    <li><strong>Familia GNU/Linux: </strong> los que usan el kernel Linux:
                    <ul>
                        <li><strong>Distros basadas en Debian: </strong>como Ubuntu, Mint o Knoppix.</li>
                        <li><strong>Distros basadas en Red Hat: </strong>como Fedora, Mandriva o CentOS.</li>
                        <li><strong>Distros basadas en Arch Linux: </strong>como Manjaro o Antergos.</li>
                    </ul>
                    </li>
                </ul>
                </section>
                <section>
                <h2>Línea de tiempo de Unix</h2>
                <img class="r-stretch" style="filter: drop-shadow(white 0px 0px 8px);" src="https://upload.wikimedia.org/wikipedia/commons/c/cd/Unix_timeline.en.svg" alt="Sistemas Unix" />
                </section>
            </section>
            <section>
                <section>
                <h2>Estructura general de un sistema Linux</h2>
                <table class="not-reveal">
                    <tr style="background: #fff2cc;">
                    <th scope="row" rowspan="4" style="background: #d9d9d9;">Espacio de usuario</th>
                    <th scope="row">Aplicaciones de usuario</th>
                    <td colspan="5">bash, LibreOffice, GIMP, Firefox</td>
                    </tr>
                    <tr style="background: #c9daf8;">
                    <th scope="row">Componentes del sistema</th>
                    <td>init: <br />OpenRC, runit, systemd</td>
                    <td>Demonios de sistema:<br />polkitd, smbd, sshd, udevd</td>
                    <td>Sistema de ventanas:<br />X11, Wayland, SurfaceFlinger</td>
                    <td>Gráficos:<br />Mesa, Catalyst</td>
                    <td>Otras bibliotecas:<br />GTK, Qt…</td>
                    </tr>
                    <tr style="background: #d9ead3;">
                    <th scope="row" rowspan="2">Biblioteca estándar de C</th>
                    <td colspan="5">fopen, execv, malloc, memcpy, localtime, pthread_create, …</td>
                    </tr>
                    <tr style="background: #d9ead3;">
                    <td colspan="5">glibc, musl, uClibc, bionic…</td>
                    </tr>
                    <tr style="background: #f4cccc;">
                    <th scope="row" rowspan="3" style="background: #d9d9d9;">Espacio de kernel</th>
                    <th scope="row" rowspan="3">Kernel Linux</th>
                    <td colspan="5">System Call Interface:<br />stat, splice, dup, read, open, ioctl, write, mmap, close, exit, …<br />cerca de 380 llamadas al sistema</td>
                    </tr>
                    <tr style="background: #f4cccc;">
                    <td>Planificación</td>
                    <td>IPC</td>
                    <td>Administración de memoria</td>
                    <td>Sistemas de archivos virtuales</td>
                    <td>Red</td>
                    </tr>
                    <tr style="background: #f4cccc;">
                    <td colspan="5">Otros componentes:<br />ALSA, DRI, evdev, klibc, LVM, device mapper, Linux Network Scheduler, Netfilter<br />Linux Security Modules: SELinux, TOMOYO, AppArmor, Smack</td>
                    </tr>
                    <tr style="background: #b7b7b7">
                    <td colspan="7" style="font-weight: bold;">Hardware</td>
                    </tr>
                </table>
                </section>
                <section>
                <h2>¿Espacios de kernel y usuario? (I)</h2>
                <ul>
                    <li>Se refiere a los dos tipos de privilegios que un proceso puede tener.</li>
                    <li>Espacio de kernel: 
                    <ul>
                        <li>El propio kernel, la mayoría de controladores de dispositivo.</li>
                        <li>Tiene acceso al espacio de memoria real.</li>
                    </ul>
                    </li>
                </ul>
                </section>
                <section>
                <h2>¿Espacios de kernel y usuario? (II)</h2>
                <ul>
                    <li>Espacio de usuario (<i>userland</i>):
                    <ul>
                        <li>Aplicaciones del usuario comunes.</li>
                        <li>Cada proceso corre en su propio espacio de memoria virtual.</li>
                        <li>No puede acceder a la memoria de otros procesos sin autorización.
                        <ul><li>Puede pedirse autorización para compartir memoria con otro proceso.</li></ul>
                        </li>
                    </ul>
                    </li>
                </ul>
                </section>
                <section>
                <h2>Anillos de protección (I)</h2>
                <ul style="font-size: smaller">
                    <li>Normalmente, lo anterior se implementa sobre los anillos de protección del procesador.
                    <ul><li>La arquitectura x86 contempla 4 anillos de protección (0-3).</li></ul>
                    </li>
                    <li>Y a su vez, los anillos de protección se implementan sobre los modos de CPU:
                    <ul><li>El 80386 es el primer procesador de la familia en incluir modos de ejecución (modo real, protegido y virtual).
                    </li></ul>
                    </li>
                </ul>
                </section>
                <section>
                <h2>Anillos de protección (I)</h2>
                <img class="r-stretch" style="filter: drop-shadow(white 0px 0px 8px);" src="https://upload.wikimedia.org/wikipedia/commons/2/2f/Priv_rings.svg" alt="Anillos de potección" />
                </section>
                <section>
                <h2>Fallas en el mecanismo de protección (I)</h2>
                <div class="cont-img">
                    <ul>
                    <li>Muchos ataques de escalamiento de privilegios aprovechan fallas en el código que corre en modo privilegiado.
                        <ul><li>Por ejemplo, código privilegiado que inadvertidamente carga código malicioso.</li></ul>
                    </li>
                    </ul>
                    <img style="width: 200px;" src="https://upload.wikimedia.org/wikipedia/commons/8/86/Meltdown_logo_with_text.svg" alt="logo de Meltdown" />
                </div>
                </section>
                <section>
                <h2>Fallas en el mecanismo de protección (II)</h2>            
                <div class="cont-img">
                    <ul>
                    <li>Otros ataques van más allá, y atacan directamente al mecanismo de protección del microprocesador:
                        <ul>
                        <li>Meltdown: la caché de una operación de lectura</li>
                        <li>Spectre: la predicción de saltos</li>
                        </ul>
                    </li>
                    </ul>
                    <img style="width: 200px;" src="https://upload.wikimedia.org/wikipedia/commons/9/94/Spectre_logo_with_text.svg" alt="logo de Spectre" />
                </div>
                </section>
                <section>
                <h2>Meltdown (I)</h2>
                <ul style="font-size: smaller;">
                    <li>Se basa en aprovechar una condición de carrera entre la ejecución de una instrucción, y la comprobación de privilegios, para leer regiones de memoria a la que no está autorizado.
                    <ul>
                        <li>Normalmente, una instrucción que intente leer memoria no autorizada hará que el controlador de memoria dé inicio a la operación.</li>
                        <li>Aunque el planificador intervendrá más adelante, al comprobar la ilegalidad, y el dato no llegará al proceso.
                        <ul><li><strong>Pero la caché de la CPU será actualizada con el valor leído igualmente.</strong></li></ul>
                        </li>
                    </ul>
                    </li>
                </ul>
                </section>
                <section>
                <h2>Meltdown (II)</h2>
                <ul style="font-size: smaller;">
                    <li>Normalmente, la caché de la CPU no es accesible a procesos no autorizados.
                    <ul><li>Pero podemos suponer que el valor de una dirección ha sido guardada en caché.</li></ul>
                    </li>
                    <li>Podemos intentar medir la velocidad con la que se leen ciertas direcciones, a través del <strong>direccionamiento indirecto por memoria</strong>, para suponer cuáles direcciones pudieron haber sido ya recientemente accedidas.
                    <ul><li>Se puede usar esta dirección ‘calculada’ como valor propiamente, aunque la CPU no devuelva el dato en sí.</li></ul>
                    </li>
                </ul>
                </section>
            </section>
            <section>
                <section>
                <h2>Componentes en espacio de kernel</h2>
                </section>
                <section>
                <h2>Linux Security Modules</h2>
                <ul>
                    <li>Framework dentro del kernel que permite implementar modelos de seguridad.</li>
                    <li>Existe desde Linux 2.6.</li>
                    <li>En el kernel, permite que cuatro sistemas estén habilitados:
                    <ul>
                        <li>AppArmor: Debian, Ubuntu.</li>
                        <li>SELinux: RedHat, Android.</li>
                        <li>Smack: MeeGo, Tizen.</li>
                        <li>Tomoyo Linux.</li>
                    </ul>
                    </li>
                </ul>
                </section>
                <section>
                <h2>Logical Volume Manager (I)</h2>
                <ul style="font-size: smaller;">
                    <li>Framework dentro del kernel para la administración de volúmenes lógicos.</li>
                    <li>LVM permite, entre otras cosas, lo siguiente:
                    <ul>
                        <li>Crear un volúmen lógico único a partir de múltiples volúmenes físicos o discos enteros.</li>
                        <li>Manejar granjas de discos, que permitan añadir y quitar discos sin dar de baja el servicio.</li>
                        <li>Permitir el redimensionado de particiones sin problemas.</li>
                        <li>Realizar copias de seguridad con snapshots de volúmenes lógicos.</li>
                        <li>Cifrar volúmenes lógicos con una contraseña.</li>
                    </ul>
                    </li>
                </ul>
                </section>
                <section>
                <h2>Logical Volume Manager (II)</h2>
                <div class="cont-img">
                    <p>LVM mantiene tres conceptos para organizar el sistema: <em>volúmenes y particiones físicas</em>, <em>grupos de volúmenes</em> y <em>volúmenes lógicos</em>.</p>
                    <img style="width: 500px; padding-left: 1em;" src="https://upload.wikimedia.org/wikipedia/commons/e/e6/Lvm.svg" alt="Esquema de LVM" />
                </div>
                </section>
                <section>
                <h2>Netfilter</h2>
                <ul>
                    <li>Framework dentro del kernel que permite realizar varias operaciones sobre la red, en forma de hooks.
                    </li>
                    <li>Se usa mucho para filtrado de paquetes y traducción de puertos y direcciones de red (NAT).</li>
                    <li>Netfilter empezó a usarse desde estas utilidades:
                    <ul>
                        <li>iptables: desde 2.4.</li>
                        <li>nftables: desde 3.13.</li>
                    </ul>
                    </li>
                    <li>Anteriormente, las siguientes utilidades estaban en el kernel:
                    <ul>
                        <li>ipfirewal/ipfw: desde 1.1.</li>
                        <li>ipchains: desde 2.2.</li>
                    </ul>
                    </li>
                </ul>
                </section>
                <section>
                <h2>iptables</h2>
                <ul>
                    <li>iptables es la utilidad más popular para implementar cortafuegos en Linux. Está dividido en varios módulos, uno para cada protocolo:
                    <ul>
                        <li><i>iptables</i> para IPv4.</li>
                        <li><i>ip6tables</i> para IPv6.</li>
                        <li><i>arptables</i> para ARP.</li>
                        <li><i>ebtables</i> para tramas Ethernet.</li>
                    </ul>
                    </li>
                    <li>Básicamente, para cada protocolo, se definen <em>tablas</em>, que contienen <em>cadenas</em> con <em>reglas</em> para tratar los paquetes.</li>
                    <li>Normalmente, la tabla que nos interesa es <i>filter</i>.</li>
                </ul>
                </section>
                <section>
                <h2>iptables: cadenas</h2>
                <ul style="font-size: smaller">
                    <li>En cada tabla se implementan cinco cadenas, según el destino del paquete:
                    <dl class="lista-natural">
                        <dt><code>PREROUTING</code></dt><dd>Paquetes antes de evaluarse su destino.</dd>
                        <dt><code>INPUT</code></dt><dd>Paquetes a ser entregados en el dispositivo.</dd>
                        <dt><code>FORWARD</code></dt><dd>Paquetes a ser reenrutados.</dd>
                        <dt><code>OUTPUT</code></dt><dd>Paquetes a ser enviados.</dd>
                        <dt><code>POSTROUTING</code></dt><dd>Paquetes después de ser evaluados.</dd>
                    </dl>
                    </li>
                    <li>Corresponden a los cinco hooks predeterminados de Netfilter, aunque puede que una tabla no las use todas.</li>
                </ul>
                </section>
                <section>
                <h2>iptables: reglas</h2>
                <ul>
                    <li>Las reglas contienen las condiciones de los paquetes que coinciden, y un destino, o un veredicto.</li>
                    <li>Cada regla puede tener tres posibles <em>veredictos</em>:
                    <dl class="lista-natural">
                        <dt><code>ACCEPT</code></dt><dd>Se permite que el paquete avance.</dd>
                        <dt><code>DROP</code><dd>El paquete se descartará.</dd>
                        <dt><code>REJECT</code><dd>El paquete es rechazado, y seinforma de ello.</dd>
                    </dl>
                    </li>
                    <li>Cada cadena de las anteriores tiene una <em>política</em>: una regla predeterminada para los paquetes que no coinciden con ninguna regla de la cadena.</li>
                </ul>
                </section>
                <section>
                <h2>Ejemplo de reglas</h2>
                <pre class="iptables"><code data-line-numbers="" style="white-space: pre-wrap">iptables -F INPUT
    iptables -A INPUT -m state --state ESTABLISHED -j ACCEPT
    iptables -A INPUT -m state --state NEW -i lo -j ACCEPT
    iptables -A INPUT -m state --state NEW -i eth0 -p tcp -m multiport --dports 21,22,53,80,139,515,3128,8080 -j ACCEPT
    iptables -A INPUT -m state --state NEW -i eth0 -p udp -m multiport --dports 53,137,138,3130 -j ACCEPT
    iptables -P INPUT DROP
    
    iptables -F FORWARD
    iptables -P FORWARD DROP
    
    iptables -F OUTPUT
    iptables -P OUTPUT ACCEPT</code></pre>
                </section>
                <section>
                <h2>Advanced Linux Sound Architecture</h2>
                <ul style="font-size: smaller;">
                    <li>Framework dentro del kernel que provee una interfaz para implementar controladores para tarjetas de audio.</li>
                    <li>Reemplaza a la antigua implementación de Open Sound System.</li>
                    <li>Permite manejar múltiples canales de audio, y aprovechar la capacidad multiprocesamiento y multihilo.</li>
                    <li>Los <em>servidores de audio</em> usan ALSA por debajo para usar el hardware:
                    <ul style="column-count: 4;">
                        <li>sndio</li>
                        <li>PulseAudio</li>
                        <li>JACK</li>
                        <li>PipeWire</li>
                    </ul>
                    </li>
                </ul>
                </section>
            </section>
            <section>
                <section>
                <h2>Componentes en espacio de usuario</h2>
                </section>
                <section>
                <h2>init</h2>
                <ul>
                    <li>Después de cargar el kernel, éste es el primer proceso lanzado, y el que inicia a todos los demás.</li>
                    <li>Adquiere el <strong>PID</strong> 1, y si el proceso no puede ser iniciado, ocurre un <b>kernel panic</b>.</li>
                    <li>Existen varios demonios que realizan esta función:
                    <ul>
                        <li>systemd</li>
                        <li>openRC</li>
                    </ul>
                    </li>
                </ul>
                </section>
                <section>
                <h2>systemd</h2>
                <ul>
                    <li>Es un framework que provee diversos componentes del sistema.
                    <ul>
                        <li>Su intención es unificar la forma en la que los sistemas Linux implementan y configuran los servicios.</li>
                        <li>Su principal función es la de proveer el sistema init.</li>
                    </ul>
                    </li>
                    <li>La mayor parte de las distribuciones Linux han adoptado systemd.
                    <ul>
                        <li>Aunque existen críticas sobre su amplio alcance:
                        <ul><li>Existen distros que evitan systemd: Devuan</li></ul>
                        </li>
                    </ul>
                    </li>
                </ul>
                </section>
                <section>
                <h2>Componentes de systemd</h2>
                <p>Además de funcionar como sistema init, los siguientes demonios pueden estar incluidos:</p>
                <ul>
                    <li><strong>journald:</strong> registro de eventos.</li>
                    <li><strong>localed:</strong> <i>locales.</i></li>
                    <li><strong>logind:</strong> sesiones de usuario.</li>
                    <li><strong>hostnamed:</strong> hostname.</li>
                    <li><strong>networkd:</strong> configuración de interfaces de red.</li>
                    <li><strong>resolved:</strong> resolución de nombres local.</li>
                    <li><strong>tmpfiles:</strong> gestión de archivos temporales.</li>
                    <li><strong>udevd:</strong> administrador de dispositivos.</li>
                </ul>
                </section>
                <section>
                <h2>cron</h2>
                <ul>
                    <li>Un planificador de tareas (o job scheduler) es el sistema que permite al sistema operativo ejecutar tareas desatendidamente cuando se den ciertas condiciones.
                    <ul>
                        <li>Normalmente, condiciones temporales.</li>
                        <li>No confundir con el <i>planificador de procesos</i>, parte integral de cualquier sistema operativo multitarea.</li>
                    </ul>
                    </li>
                    <li>En Windows, tenemos a <i>at</i>, a <i>cron</i>, y a <i>Windows Task Scheduler</i>.</li>
                    <li>En Unix, el planificador de tareas predeterminado es <strong>cron</strong>.</li>
                </ul>
                </section>
                <section>
                <h2>crontab</h2>
                <ul>
                    <li>Las tareas que cron reconoce son especificadas en unos archivos de texto, conocidos colectivamente como crontabs.
                    <ul><li>Existe un crontab para el sistema, y pueden existir también uno para cada usuario.</li></ul>
                    </li>
                </ul>
                <pre><code># ┌───────────── minute (0–59)
    # │ ┌───────────── hour (0–23)
    # │ │ ┌───────────── day of the month (1–31)
    # │ │ │ ┌───────────── month (1–12)
    # │ │ │ │ ┌───────────── day of the week (0–6) (Sunday to Saturday;
    # │ │ │ │ │              7 is also Sunday on some systems)
    # │ │ │ │ │
    # │ │ │ │ │
    # * * * * * [comando a ejecutar]</code></pre>
                </section>
            </section>
            <section>
                <section>
                <h2>Red</h2>
                <p>En los sistemas Linux, la configuración de la red se logra mediante la conjunción de varios sistemas, describimos algunos aquí.</p>
                </section>
                <section>
                <h2>NetworkManager</h2>
                <div class="cont-img">
                    <ul style="font-size: smaller;">
                    <li>El demonio más utilizado para administrar y configurar interfaces de red.</li>
                    <li>El demonio está atento a cambios en el hardware, y en las condiciones de red; e informa a los clientes conectados.</li>
                    <li>La configuración se encuentra en <code>/etc/NetworkManager/NetworkManager.conf</code></li>
                    </ul>
                    <img src="https://upload.wikimedia.org/wikipedia/commons/9/9e/GNOME_Shell_NM_front-end_3.10.png" alt="NetworkManager frontend" style="width: 500px;" />
                </div>
                </section>
                <section>
                <h2>wpa_supplicant</h2>
                <ul>
                    <li>Es la implementación más utilizada de un <i>supplicant</i> IEEE 802.11i.
                    <ul>
                        <li>La norma IEEE 802.11i es la que estandariza el protocolo WPA, para redes WiFi seguras.</li>
                        <li>Un <i>supplicant</i>, en el contexto de las redes WiFi, es un dispositivo o sistema en busca de ser autentificado.</li>
                    </ul>
                    </li>
                    <li>Su archivo de configuración se encuentra en <code>/etc/wpa_supplicant/wpa_supplicant.conf</code>.</li>
                </ul>
                </section>
                <section>
                <h2>wpa_supplicant: ejemplo</h2>
                <pre><code>ctrl_interface=/run/wpa_supplicant
    ctrl_interface_group=wheel
    update_config=1
    ap_scan=1
    country=US
    
    network={
        ssid="MYSSID"
        psk=59e0d07fa4c7741797a4e394f38a5c321e3bed51d54ad5fcbd3f84bc7415d73d
    }</code></pre>
                </section>
                <section>
                <h2>netplan</h2>
                <ul>
                    <li>Desde Ubuntu 17.10, este componente viene preinstalado para configurar muchos aspectos de la red.</li>
                    <li>Se basa en archivos YAML, almacenados en <code>/etc/netplan/</code>.</li>
                </ul>
                </section>
                <section>
                <h2>netplan: ejemplo</h2>
                <pre class="yaml"><code>network:
        version: 2
        renderer: networkd
        ethernets:
        enp3s0:
            dhcp4: no
            addresses:
            - 192.168.0.37/24
            nameservers:
            search: [mydomain, otherdomain]
            addresses: [8.8.8.8, 1.1.1.1]
            routes:
            - to: default
                via: 192.168.0.1</code></pre>
                </section>
            </section>
            <section>
                <section>
                <h2>Entorno gráfico</h2>
                <ul>
                    <li>La forma tradicional de comunicarse con el sistema operativo es a través de una shell de texto.
                    <ul><li>Pero también podemos tener shells gráficos.</li></ul>
                    </li>
                    <li>A diferencia de otros sistemas, como Windows, los componentes gráficos no están integrados en el sistema, y éstos pueden no existir.</li>
                    <li>Tener una sesión gráfica implica el uso de varios componentes que deben trabajar juntos, siguiendo varios protocolos.</li>
                </ul>
                </section>
                <section>
                <h2>Sistema de ventanas (I)</h2>
                <ul>
                    <li>Es el programa (o conjunto de programas) que maneja el dibujado de los elementos de una GUI en una pantalla. Específicamente, el paradigma WIMP.</li>
                    <li>Tiene dos componentes principales: el <strong>servidor de ventanas</strong>, un programa que "escucha" peticiones de <strong>clientes</strong>, para dibujar elementos en la pantalla; y devuelve al cliente la entrada del usuario.</li>
                </ul>
                </section>
                <section>
                <h2>Sistema de ventanas (II)</h2>
                <ul>
                    <li>En este nivel, <i>ventana</i> es solo un recuadro en donde dibujar.</li>
                    <li>Sistemas de ventanas más comunes:
                    <ul>
                        <li><strong>X11:</strong> el más usado actualmente.</li>
                        <li><strong>Wayland:</strong> una alternativa algo menos popular.</li>
                        <li><strong>Mir:</strong> un intento de Canonical.</li>
                    </ul>
                    </li>
                </ul>
                </section>
                <section>
                <h2>X11</h2>
                <ul>
                    <li>El sistema de ventanas más común en sistemas Unix.</li>
                    <li>Provee un framework para dibujar ‘primitivas’: componentes para mover y dibujar ventanas, y eventos del ratón y el teclado.</li>
                    <li>Soporta conexiones a través de la red.</li>
                    <li>Implementaciones:
                    <ul>
                        <li><strong>X.Org</strong>: la implementación de referencia en estos días.</li>
                        <li><strong>XFree86</strong>: la más popular hasta 2004.</li>
                    </ul>
                    </li>
                </ul>
                </section>
                <section>
                <h2>Administrador de ventanas</h2>
                <ul>
                    <li>O <i>window manager</i>, el sistema que permite al usuario manipular ventanas.
                    <ul>
                        <li>Moverlas, cerrarlas, maximizarlas, etc.</li>
                        <li>Dibuja los <em>decorados de ventana</em>.</li>
                        <li>Provee el menú contextual.</li>
                    </ul>
                    </li>
                    <li>Puede tener otros elementos asociados: barras de tareas o docks, para controlar ventanas en uso, espacios de trabajo, fondos de escritorio…
                    </li>
                </ul>
                </section>
                <section>
                <h2>Administrador de ventanas: tipos</h2>
                <dl class="lista-natural">
                    <dt>Compositing WM</dt><dd>Ventanas creadas por compositores con efectos 2D y 3D.</dd>
                    <dt>Stacking WM</dt><dd>Ventanas que pueden dibujarse unas sobre otras.</dd>
                    <dt>Tiling WM</dt><dd>Ventanas acomodadas en mosaico.</dd>
                    <dt>Dynamic WM</dt><dd>La que puede aplicar más de un tipo anterior.</dd>
                </dl>
                </section>
                <section>
                <h2>Administrador de ventanas: ejemplos</h2>
                <div class="cont-img">
                    <ul style="font-size: smaller;">
                    <li>Desktop Window Manager/dwm.exe</li>
                    <li>Enlightenment</li>
                    <li>IceWM</li>
                    <li>KWin (KDE)</li>
                    <li>Metacity (Gnome 2)</li>
                    <li>Mutter (Gnome 3)</li>
                    <li>Openbox (LXDE)</li>
                    <li>wmii</li>
                    <li>xfwm (xfce)</li>
                    </ul>
                    <img style="width: 500px;" src="https://upload.wikimedia.org/wikipedia/commons/f/f8/Windowmanager_ohne.png" alt="Ventanas sin administrador de ventanas" />
                </div>
                </section>
                <section>
                <h2>Entorno de escritorio</h2>
                <ul style="font-size: smaller;">
                    <li>La implementación completa de la <em>metáfora de escritorio</em>.</li>
                    <li>Consiste, como mínimo, en un administrador de ventanas, y habitualmente, en toda la distribución de programas diseñados para trabajar en conjunto con ese administrador.</li>
                </ul>
                <div class="galeria">
                    <figure>
                    <img src="https://upload.wikimedia.org/wikipedia/commons/e/e5/Elementary_OS_7.0_Horus.jpg" alt="Pantheon" />
                    <figcaption>Pantheon</figcaption>
                    </figure>
                    <figure>
                    <img src="https://upload.wikimedia.org/wikipedia/commons/3/3d/Ubuntu_Unity_22.10_desktop_screenshot.png" alt="Unity" />
                    <figcaption>Unity</figcaption>
                    </figure>
                </div>
                </section>
                <section>
                <h2>Entornos de escritorio</h2>
                <ul style="column-count: 3;">
                    <li>Gnome</li>
                    <li>KDE Plasma</li>
                    <li>Cinnamon</li>
                    <li>Unity</li>
                    <li>Mate</li>
                    <li>LXDE/LXQt</li>
                    <li>Xfce</li>
                    <li>Windows Shell</li>
                </ul>
                <div class="galeria">
                    <figure>
                    <img style="height: 300px;" src="https://upload.wikimedia.org/wikipedia/commons/4/4c/LXDE_desktop_full.png" alt="LXDE" />
                    <figcaption>LXDE</figcaption>
                    </figure>
                    <figure>
                    <img style="height: 300px;" src="https://upload.wikimedia.org/wikipedia/commons/7/78/Solus_4.1_Budgie.jpg" alt="Budgie" />
                    <figcaption>Budgie</figcaption>
                    </figure>
                </div>
                </section>
                <section>
                <h2>Ejemplo de entorno: LXDE</h2>
                <ul style="font-size: smaller;">
                    <li><em>¿Por qué de ejemplo?</em> Es bastante modular.</li>
                    <li>Diseñado para consumir pocos recursos.</li>
                    <li>Componentes:
                    <ul>
                        <li>Administrador de archivos: PCManFM</li>
                        <li>Lanzador: LXLauncher</li>
                        <li>Panel: LXPanel</li>
                        <li>Visor de imágenes: GPicView</li>
                        <li>Administrador de pantallas: LXDM</li>
                        <li>Editor de texto: Leafpad</li>
                        <li>Administrador de ventanas: Openbox</li>
                    </ul>
                    </li>
                </ul>
                </section>
                <section>
                <h2>Gestor de pantallas X (I)</h2>
                <ul style="font-size: smaller;">
                    <li>En general, cuando un sistema tiene una instancia de un servidor X, se espera iniciar esta sesión gráfica cuanto antes.
                    <ul>
                        <li>Esto es, antes incluso del inicio de sesión.</li>
                    </ul>
                    </li>
                    <li>X no maneja la autentificacion de forma predeterminada.
                    <ul>
                        <li>El componente que se encarga de eso es el <strong>gestor de pantallas</strong>, o <i>display manager</i>.</li>
                    </ul>
                    </li>
                    <li>El gestor de pantallas inicia al servidor X antes de iniciar sesión, y después, presenta la pantalla de sesión.</li>
                </ul>
                </section>
                <section>
                <h2>Gestor de pantallas X (II)</h2>
                <ul style="column-count: 2;">
                    <li>GDM (Gnome)</li>
                    <li>LightDM</li>
                    <li>SDDM (KDE, LXQt)</li>
                    <li>XDM</li>
                </ul>
                <div class="galeria" style="height: 300px;">
                    <figure>
                    <img src="https://upload.wikimedia.org/wikipedia/commons/6/6d/Fedora_21_login_screen.png" alt="gdm" />
                    <figcaption>gdm</figcaption>
                    </figure>
                    <figure>
                    <img src="https://upload.wikimedia.org/wikipedia/commons/d/d4/Fedora_login_screen.png" alt="lightdm" />
                    <figcaption>lightdm</figcaption>
                    </figure>
                </div>
                </section>
                <section>
                <h2>Widget</h2>
                <p>El elemento principal en una interfaz gráfica es el <strong>widget</strong>, un elemento gráfico que permite interactuar con la aplicación de alguna forma.</p>
                <ul>
                    <li>Botones</li>
                    <li>Campos de texto</li>
                    <li>Combos</li>
                    <li>Casillas</li>
                    <li>Cuadros de diálogo</li>
                    <li>Radiobotones</li>
                </ul>
                </section>
                <section>
                <h2>Biblioteca de widgets (I)</h2>
                <ul>
                    <li>Salvo en muy pocas ocasiones, no dibujamos a mano los widgets de nuestra aplicación:
                    <ul>
                        <li>Esa tarea la realiza una <strong>biblioteca de widgets</strong> o <i>widget toolkit</i>.
                        </li>
                        <li>Las bibliotecas de widgets mantienen un estilo consistente entre todos sus elementos.</li>
                    </ul>
                    </li>
                </ul>
                </section>
                <section>
                <h2>Biblioteca de widgets (II)</h2>
                <p>Muchos widgets son multiplataforma, no dependen del sistema operativo:</p>
                <ul>
                    <li>GTK</li>
                    <li>Qt</li>
                    <li>wxWidgets</li>
                    <li>Kivy</li>
                    <li>Tk</li>
                </ul>
                </section>
                <section>
                <h2>Biblioteca de widgets (III)</h2>
                <p>Los sistemas operativos que incluyen de serie sistemas gráficos incluyen también una biblioteca de widgets.</p>
                <ul style="font-size: smaller; column-count: 2;">
                    <li>Microsoft Windows
                    <ul>
                        <li>Win32 API
                        <ul>
                            <li>Microsoft Foundation Classes</li>
                            <li>Windows Template Library</li>
                            <li>Windows Presentation Foundation</li>
                        </ul>
                        </li>
                        <li>Windows UI Library</li>
                    </ul>
                    </li>
                    <li>Mac OS/OS X
                    <ul>
                        <li>Carbon</li>
                        <li>Cocoa</li>
                    </ul>
                    </li>
                </ul>
                </section>
                <section>
                <h2>Cargador de arranque</h2>
                <ul>
                    <li>O <i>bootloader</i>, primer componente ejecutado por la CPU al operar.</li>
                    <li>Es la encargada de cargar el kernel Linux en la memoria principal.
                    <ul>
                        <li>GRUB</li>
                        <li>LILO</li>
                        <li>SYSLINUX</li>
                        <li>gummiboot/systemd-boot</li>
                    </ul>
                    </li>
                </ul>
                </section>
                <section>
                <h2>Otros sistemas</h2>
                <ul>
                    <li><strong>CUPS</strong>: framework para servir impresoras.</li>
                    <li><strong>FUSE</strong>: <i>Filesystem in Userspace</i>.</li>
                    <li><strong>SSH</strong>: sistema para conexiones remotas seguras.</li>
                    <li><strong>VNC</strong>: sistema para escritorios remotos.</li>
                    <li>Servidores: Web, correo, proxy, etc...</li>
                </ul>
                </section>
            </section>
            <script src="assets/reveal.js"></script>
            <script src="assets/highlight/highlight.js"></script>
        <script>    
            Reveal.initialize({
            hash: true,
            plugins: [ RevealHighlight ]
            });//]]>
        </script>
    </body>
</html>